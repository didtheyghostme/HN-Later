var background=(function(){"use strict";function a(e){return e==null||typeof e=="function"?{main:e}:e}const r=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,u=a(()=>{async function e(){try{const s=(await r.storage.local.get("itemCount")).itemCount||0;await r.action.setBadgeText({text:s>0?String(s):""}),await r.action.setBadgeBackgroundColor({color:"#ff6600"})}catch(t){console.error("Failed to update badge:",t)}}r.storage.local.onChanged.addListener(t=>{t.itemCount&&e()}),e(),r.runtime.onMessage.addListener((t,s,c)=>(t.type==="OPEN_THREAD"&&(r.tabs.create({url:`${t.url}#hn-later-unread`}),c({success:!0})),!0))});function d(){}function n(e,...t){}const i={debug:(...e)=>n(console.debug,...e),log:(...e)=>n(console.log,...e),warn:(...e)=>n(console.warn,...e),error:(...e)=>n(console.error,...e)};let o;try{o=u.main(),o instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw i.error("The background crashed on startup!"),e}return o})();
